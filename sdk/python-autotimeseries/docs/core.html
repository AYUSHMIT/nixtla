---

title: AutoTimeSeries


keywords: fastai
sidebar: home_sidebar

summary: "Core implementation of Nixtla SDK, `autotimeseries`."
description: "Core implementation of Nixtla SDK, `autotimeseries`."
nb_path: "nbs/core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="AutoTS" class="doc_header"><code>class</code> <code>AutoTS</code><a href="https://github.com/Nixtla/autotimeseries/tree/main/autotimeseries/core.py#L19" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>AutoTS</code>(<strong><code>bucket_name</code></strong>:<code>str</code>, <strong><code>api_id</code></strong>:<code>str</code>, <strong><code>api_key</code></strong>:<code>str</code>, <strong><code>aws_access_key_id</code></strong>:<code>str</code>, <strong><code>aws_secret_access_key</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Compute time series features at scale.
Send an email to fede.garza.ramirez@gmail.com to request access.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>bucket_name: str
    Bucket name.
api_id: str
    API identifier.
api_key: str
    API key.
aws_access_key_id: str
    AWS ACCESS KEY ID.
aws_secret_access_key: str
    AWS SECRET ACCESS KEY.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Time-Series-as-a-Service">Time Series as a Service<a class="anchor-link" href="#Time-Series-as-a-Service"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">autotimeseries</span> <span class="o">=</span> <span class="n">AutoTS</span><span class="p">(</span><span class="n">bucket_name</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;BUCKET_NAME&#39;</span><span class="p">],</span>
                        <span class="n">api_id</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;API_ID&#39;</span><span class="p">],</span> 
                        <span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;API_KEY&#39;</span><span class="p">],</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AWS_ACCESS_KEY_ID&#39;</span><span class="p">],</span> 
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AWS_SECRET_ACCESS_KEY&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="M5-example">M5 example<a class="anchor-link" href="#M5-example"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">filename_target</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">upload_to_s3</span><span class="p">(</span><span class="s1">&#39;../data/target.parquet&#39;</span><span class="p">)</span>
<span class="n">filename_static</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">upload_to_s3</span><span class="p">(</span><span class="s1">&#39;../data/static.parquet&#39;</span><span class="p">)</span>
<span class="n">filename_temporal</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">upload_to_s3</span><span class="p">(</span><span class="s1">&#39;../data/temporal.parquet&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">filename_target</span><span class="p">,</span> <span class="n">filename_static</span><span class="p">,</span> <span class="n">filename_temporal</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>target.parquet
static.parquet
temporal.parquet
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Each time series of the uploaded datasets is defined by the column <code>item_id</code>. Meanwhile the time column is defined by <code>timestamp</code> and the target column by <code>demand</code>. We need to pass this arguments to each call.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">columns</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unique_id_column</span><span class="o">=</span><span class="s1">&#39;item_id&#39;</span><span class="p">,</span>
               <span class="n">ds_column</span><span class="o">=</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span>
               <span class="n">y_column</span><span class="o">=</span><span class="s1">&#39;demand&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Computing-calendar-features">Computing calendar features<a class="anchor-link" href="#Computing-calendar-features"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">response_calendar</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">calendartsfeatures</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename_temporal</span><span class="p">,</span>
                                                      <span class="n">country</span><span class="o">=</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span>
                                                      <span class="o">**</span><span class="n">columns</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">response_calendar</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;id_job&#39;: &#39;11ab846d-b2b8-42a9-bd91-787668cf292d&#39;,
 &#39;dest_url&#39;: &#39;s3://nixtla-user-test/calendar-features.csv&#39;,
 &#39;status&#39;: 200,
 &#39;message&#39;: &#39;Check job status at GET /jobs/{job_id}&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To check the status of your job use the method <code>get_status</code>:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">autotimeseries</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">response_calendar</span><span class="p">[</span><span class="s1">&#39;id_job&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;status&#39;: &#39;InProgress&#39;, &#39;processing_time_seconds&#39;: 0, &#39;logs&#39;: &#39;[]&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you want to use the result of your job, you have to wait until its status is <code>Completed</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Make-forecasts">Make forecasts<a class="anchor-link" href="#Make-forecasts"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">response_forecast</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">tsforecast</span><span class="p">(</span><span class="n">filename_target</span><span class="o">=</span><span class="n">filename_target</span><span class="p">,</span>
                                              <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span>
                                              <span class="n">horizon</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span> 
                                              <span class="n">filename_static</span><span class="o">=</span><span class="n">filename_static</span><span class="p">,</span> 
                                              <span class="n">filename_temporal</span><span class="o">=</span><span class="s1">&#39;calendar-features.parquet&#39;</span><span class="p">,</span>
                                              <span class="n">objective</span><span class="o">=</span><span class="s1">&#39;tweedie&#39;</span><span class="p">,</span>
                                              <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;rmse&#39;</span><span class="p">,</span>
                                              <span class="n">n_estimators</span><span class="o">=</span><span class="mi">170</span><span class="p">,</span>
                                              <span class="o">**</span><span class="n">columns</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">response_forecast</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;id_job&#39;: &#39;32af92e4-d6ce-49e6-9eb1-98b7a5bb58c1&#39;,
 &#39;dest_url&#39;: &#39;s3://nixtla-user-test/forecasts.csv&#39;,
 &#39;status&#39;: 200,
 &#39;message&#39;: &#39;Check job status at GET /jobs/{job_id}&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">autotimeseries</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">response_forecast</span><span class="p">[</span><span class="s1">&#39;id_job&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>File written...
Writing forecasts...
Done
[160]#011train&#39;s rmse: 2.43179#011valid&#39;s rmse: 2.40628
[140]#011train&#39;s rmse: 2.44148#011valid&#39;s rmse: 2.41407
[120]#011train&#39;s rmse: 2.45217#011valid&#39;s rmse: 2.42326
[100]#011train&#39;s rmse: 2.46383#011valid&#39;s rmse: 2.43394
[80]#011train&#39;s rmse: 2.47793#011valid&#39;s rmse: 2.44711
[60]#011train&#39;s rmse: 2.49882#011valid&#39;s rmse: 2.46724
[40]#011train&#39;s rmse: 2.5633#011valid&#39;s rmse: 2.53035
[20]#011train&#39;s rmse: 3.07992#011valid&#39;s rmse: 3.05776
[LightGBM] [Warning] bagging_fraction is set=1.0, subsample=1.0 will be ignored. Current value: bagging_fraction=1.0
[LightGBM] [Warning] min_data_in_leaf is set=20, min_child_samples=20 will be ignored. Current value: min_data_in_leaf=20
[LightGBM] [Warning] bagging_freq is set=0, subsample_freq=0 will be ignored. Current value: bagging_freq=0
Starting training
Done
Starting preprocessing
Done
Done
Processing temporal features
Processing static features
Reading file...
File read.
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;status&#39;: &#39;Completed&#39;, &#39;processing_time_seconds&#39;: 908}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download-forecasts-from-S3">Download forecasts from S3<a class="anchor-link" href="#Download-forecasts-from-S3"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">autotimeseries</span><span class="o">.</span><span class="n">download_from_s3</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;forecasts.csv&#39;</span><span class="p">,</span> <span class="n">filename_output</span><span class="o">=</span><span class="s1">&#39;../data/forecasts.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[==================================================]</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Evaluate-performance">Evaluate performance<a class="anchor-link" href="#Evaluate-performance"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">response_benchmarks</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">tsbenchmarks</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;forecasts.csv&#39;</span><span class="p">,</span>
                                                  <span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;M5&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">response_benchmarks</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;id_job&#39;: &#39;7dbd525e-3fa9-416a-86ef-fbdadda129a3&#39;,
 &#39;dest_url&#39;: &#39;s3://nixtla-user-test/benchmarks.csv&#39;,
 &#39;status&#39;: 200,
 &#39;message&#39;: &#39;Check job status at GET /jobs/{job_id}&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">autotimeseries</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">response_benchmarks</span><span class="p">[</span><span class="s1">&#39;id_job&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Successfully decompressed data/m5/datasets/m5.zip
Successfully downloaded m5.zip, 50219189, bytes.
Decompressing zip file...
Reading file...
File readed.
Computing metrics...
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;status&#39;: &#39;Completed&#39;, &#39;processing_time_seconds&#39;: 348}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Download-evaluation">Download evaluation<a class="anchor-link" href="#Download-evaluation"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">autotimeseries</span><span class="o">.</span><span class="n">download_from_s3</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;benchmarks.csv&#39;</span><span class="p">,</span> <span class="n">filename_output</span><span class="o">=</span><span class="s1">&#39;../data/benchmarks.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

