---

title: autotimeseries


keywords: fastai
sidebar: home_sidebar

summary: "Nixtla SDK. Time Series Forecasting pipeline at scale."
description: "Nixtla SDK. Time Series Forecasting pipeline at scale."
nb_path: "nbs/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://github.com/Nixtla/nixtla/actions/workflows/python-sdk.yml"><img src="https://github.com/Nixtla/nixtla/actions/workflows/python-sdk.yml/badge.svg" alt="CI python sdk"></a>
<a href="https://pypi.org/project/autotimeseries/"><img src="https://img.shields.io/pypi/pyversions/autotimeseries" alt="Python"></a>
<a href="https://pypi.org/project/autotimeseries/"><img src="https://img.shields.io/pypi/v/autotimeseries?color=blue" alt="PyPi"></a>
<a href="https://github.com/Nixtla/nixtla/blob/main/sdk/python-autotimeseries/LICENSE"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License"></a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>autotimeseries</strong> is a python SDK to consume the APIs developed in <a href="https://github.com/Nixtla/nixtla">https://github.com/Nixtla/nixtla</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="PyPI">PyPI<a class="anchor-link" href="#PyPI"> </a></h3><p><code>pip install autotimeseries</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2><p>Check the following examples for a full pipeline:</p>
<ul>
<li><a href="https://github.com/Nixtla/autotimeseries/tree/main/examples/m5">M5 state-of-the-art reproduction</a>.</li>
<li><a href="https://colab.research.google.com/drive/1pmp4rqiwiPL-ambxTrJGBiNMS-7vm3v6?ts=616700c4">M5 state-of-the-art reproduction in Colab</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Basic-usage">Basic usage<a class="anchor-link" href="#Basic-usage"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">autotimeseries.core</span> <span class="kn">import</span> <span class="n">AutoTS</span>

<span class="n">autotimeseries</span> <span class="o">=</span> <span class="n">AutoTS</span><span class="p">(</span><span class="n">bucket_name</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;BUCKET_NAME&#39;</span><span class="p">],</span>
                        <span class="n">api_id</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;API_ID&#39;</span><span class="p">],</span> 
                        <span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;API_KEY&#39;</span><span class="p">],</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AWS_ACCESS_KEY_ID&#39;</span><span class="p">],</span> 
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AWS_SECRET_ACCESS_KEY&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Upload-dataset-to-S3">Upload dataset to S3<a class="anchor-link" href="#Upload-dataset-to-S3"> </a></h4><div class="highlight"><pre><span></span><span class="n">train_dir</span> <span class="o">=</span> <span class="s1">&#39;../data/m5/parquet/train&#39;</span>
<span class="c1"># File with target variables</span>
<span class="n">filename_target</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">upload_to_s3</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">train_dir</span><span class="si">}</span><span class="s1">/target.parquet&#39;</span><span class="p">)</span>
<span class="c1"># File with static variables</span>
<span class="n">filename_static</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">upload_to_s3</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">train_dir</span><span class="si">}</span><span class="s1">/static.parquet&#39;</span><span class="p">)</span>
<span class="c1"># File with temporal variables</span>
<span class="n">filename_temporal</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">upload_to_s3</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">train_dir</span><span class="si">}</span><span class="s1">/temporal.parquet&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Each time series of the uploaded datasets is defined by the column <code>item_id</code>. Meanwhile the time column is defined by <code>timestamp</code> and the target column by <code>demand</code>. We need to pass this arguments to each call.</p>
<div class="highlight"><pre><span></span><span class="n">columns</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unique_id_column</span><span class="o">=</span><span class="s1">&#39;item_id&#39;</span><span class="p">,</span>
               <span class="n">ds_column</span><span class="o">=</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span>
               <span class="n">y_column</span><span class="o">=</span><span class="s1">&#39;demand&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Send-the-job-to-make-forecasts">Send the job to make forecasts<a class="anchor-link" href="#Send-the-job-to-make-forecasts"> </a></h4><div class="highlight"><pre><span></span><span class="n">response_forecast</span> <span class="o">=</span> <span class="n">autotimeseries</span><span class="o">.</span><span class="n">tsforecast</span><span class="p">(</span><span class="n">filename_target</span><span class="o">=</span><span class="n">filename_target</span><span class="p">,</span>
                                              <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span>
                                              <span class="n">horizon</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span> 
                                              <span class="n">filename_static</span><span class="o">=</span><span class="n">filename_static</span><span class="p">,</span>
                                              <span class="n">filename_temporal</span><span class="o">=</span><span class="n">filename_temporal</span><span class="p">,</span>
                                              <span class="n">objective</span><span class="o">=</span><span class="s1">&#39;tweedie&#39;</span><span class="p">,</span>
                                              <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;rmse&#39;</span><span class="p">,</span>
                                              <span class="n">n_estimators</span><span class="o">=</span><span class="mi">170</span><span class="p">,</span>
                                              <span class="o">**</span><span class="n">columns</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Download-forecasts">Download forecasts<a class="anchor-link" href="#Download-forecasts"> </a></h4><div class="highlight"><pre><span></span><span class="n">autotimeseries</span><span class="o">.</span><span class="n">download_from_s3</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;forecasts_2021-10-12_19-04-32.csv&#39;</span><span class="p">,</span> <span class="n">filename_output</span><span class="o">=</span><span class="s1">&#39;../data/forecasts.csv&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
</div>
 

